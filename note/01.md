

# è¿è¡Œ

ç»ˆç«¯è¿è¡Œnode æ–‡ä»¶å

**nodemonå®ç°è‡ªåŠ¨æ›´æ–°**

ç»ˆç«¯è¿è¡Œnodemon æ–‡ä»¶å

# æ¨¡å—

æ ¸å¿ƒï¼šä¸éœ€è¦requireã€‚å†…ç½®ï¼šä¸ç”¨installï¼Œéœ€è¦require

![node](F:\å›¾ç‰‡\node.png)

## ç¬¬ä¸‰æ–¹æ¨¡å—

### 1.npm i download-git-repo -S

å®ç°ä»gitä¸Šå…‹éš†ä»£ç åˆ°æœ¬åœ°æ–‡ä»¶å¤¹ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å†™gitåœ°å€ï¼Œç¬¬äºŒä¸ªå‚æ•°å†™æœ¬åœ°æ–‡ä»¶å¤¹åœ°å€ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼ŒæˆåŠŸæˆ–å¤±è´¥æ—¶æ‰§è¡Œ

### 2.npm i ora -S

å®ç°ä¸‹è½½æ—¶çš„æ˜¾ç¤ºè¿‡ç¨‹ï¼Œprocess = ora(ä¸‹è½½æ—¶æ˜¾ç¤ºçš„å†…å®¹) ï¼Œprocess.fail()æ˜¾ç¤ºå¤±è´¥å›¾æ ‡ï¼Œprocess.succeed()æ˜¾ç¤ºæˆåŠŸå›¾æ ‡

```
const repo = 'github:su37josephxia/vue-template';
const test = '../test';
clone(repo,test);
function clone(repo,test) {
  const download = require('download-git-repo')
  const ora = require('ora')
  const process = ora(`æ­£åœ¨ä¸‹è½½${repo}`)
  process.start()
  download(repo, test, err => {
    if (err) {
      process.fail()
         } else {
      process.succeed()
    }
  })
}
```

### 3.npm i util -S 

å®ç°å°†nodeè½¬å˜ä¸ºpromiseçš„å†™æ³•ï¼Œç”¨åŒæ­¥æ–¹å¼å†™å¼‚æ­¥ä»£ç 

```
const repo = 'github:su37josephxia/vue-template';
const test = '../test';
clone(repo,test);
 async function clone(repo,test) {
  const {promisify} = require('util')
  const download = promisify(require('download-git-repo'))
  const ora = require('ora')
  const process = ora(`æ­£åœ¨ä¸‹è½½${repo}`)
  process.start()
   try {
    await download(repo,test)
  } catch (error) {
    process.fail()
  }
  process.succeed()
 }
```

### æ¨¡å—å¯¼å‡ºå¯¼å…¥

```
module.exports.clone = async function.....
const {clone} = require('å¯¼å‡ºæ–‡ä»¶è·¯å¾„')
```

# æ ¸å¿ƒapi

### fsï¼šæ–‡ä»¶ç³»ç»Ÿ

```
const data = fs.readFileSync(è·¯å¾„) :åŒæ­¥è°ƒç”¨
const data = fs.readFile(è·¯å¾„ï¼Œ(err,data)=>{}): å¼‚æ­¥è°ƒç”¨
console.log(data) å®é™…ä¸Šè¯»å–çš„æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶buffer
å¦‚æœè¦è¯»å–çœŸæ­£çš„å†…å®¹ï¼šconsole.log(data.toString())
```

### Buffer(é‡è¦)

è¯»å–æ•°æ®ç±»å‹ä¸ºBuï¬€er **ç”±äºè¯»å–çš„æ•°æ®éƒ½æ˜¯äºŒè¿›åˆ¶å€¼ï¼Œä¸ºäº†æ“çºµè¿™ä¸ªäºŒè¿›åˆ¶å€¼ï¼Œéœ€è¦ä½¿ç”¨Bufferï¼ŒBuffer ç±»æ˜¯ç”¨æ¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®**

å®é™…ä¸Šbufferé‡Œé¢å­˜çš„è¿˜æ˜¯ 0100011.... è¿™äº›ï¼Œ**åªä¸è¿‡æ¯8ä¸ªå­—èŠ‚æ˜¾ç¤ºæˆä¸€ä¸ª16è¿›åˆ¶æ•°å­—**æ¥ç»™ä½ çœ‹ï¼Œæ‰€ä»¥å½“ä½ çœŸæ­£ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡æ˜ç‰¹å®šçš„ç¼–è§£ç æ–¹å¼(é»˜è®¤utf8)

8bitï¼ˆä½ï¼‰ = 1 byteï¼ˆå­—èŠ‚ï¼‰ 

```
//åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º10å­—èŠ‚ä»¥0å¡«å……çš„Buffer
constbuf1=Buffer.alloc(10);
console.log(buf1);

Buffer.allocï¼šåˆ†é…å†…å­˜ç©ºé—´ ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå¤šå°‘å­—èŠ‚ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºä»¥ä»€ä¹ˆå¡«å……
æ¯”å¦‚Buffer.alloc(10,22)
åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º10å­—èŠ‚ä»¥åè¿›åˆ¶æ•°22å¡«å……çš„Buffer
22å…ˆè½¬æ¢ä¸ºäºŒè¿›åˆ¶ 10110ï¼Œç”±äºBufferçš„æ•°æ®æ˜¾ç¤ºæ˜¯ä»¥16è¿›åˆ¶æ˜¾ç¤ºçš„=>10110è½¬æ¢ä¸º16è¿›åˆ¶ä¸º16
æ‰€ä»¥æ˜¾ç¤ºä¸ºï¼š<Buffer 16 16 16 16 16 16 16 16 16 16>
```

```
//åˆ›å»ºä¸€ä¸ªBufferåŒ…å«ascii.
//asciiæŸ¥è¯¢http://ascii.911cha.com/
constbuf2=Buffer.from('a')
console.log(buf2,buf2.toString())

Buffer.from: å°†æŸä¸ªå€¼è½¬æ¢æˆBufferæ•°æ®
```

åˆ›å»ºBufferåŒ…å«UTF-8å­—èŠ‚//UFT-8ï¼šä¸€ç§å˜é•¿çš„ç¼–ç æ–¹æ¡ˆï¼Œä½¿ç”¨1~6ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼›

```
constbuf3=Buffer.from('Bufferåˆ›å»ºæ–¹æ³•');
console.log(buf3);
```

å†™å…¥æ•°æ®

```
buf1.write('hello');console.log(buf1);
```

è¯»å–

```
console.log(buf3.toString());
```

åˆå¹¶

```
const buf4=Buffer.concat([buf1,buf3]);
```

### http

```
const http = require('http')
const fs = require('fs')
const server = http.createServer((request,response)=>{
  const {url,method} = request
  if(url === '/' && method === 'GET') {
    response.writeHead(200,{
      'Content-Type':'text/html'
    })
    response.end('hello')
  } else if(url === '/users'&& method === 'GET') {
    response.writeHead(200, {
      'Content-Type':'application/json'
    })
    response.end(JSON.stringify({
      name:'xiaoxu',
      age:'20'
    }))
  }
})
server.listen(3000)
```

### streamæµæ“ä½œ(é‡è¦)

#### æµçš„åŸºæœ¬æ¦‚å¿µåŠç†è§£

> æµæ˜¯ä¸€ç§æ•°æ®ä¼ è¾“æ‰‹æ®µï¼Œæ˜¯æœ‰é¡ºåºçš„ï¼Œæœ‰èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œæ¯”å¦‚ä½ è¦æŠŠæ•°æ®ä»ä¸€ä¸ªåœ°æ–¹ä¼ åˆ°å¦å¤–ä¸€ä¸ªåœ°æ–¹
>  æµéå¸¸é‡è¦ï¼Œgulpï¼Œwebpack,HTTPé‡Œçš„è¯·æ±‚å’Œå“åº”ï¼Œhttpé‡Œçš„socketéƒ½æ˜¯æµï¼ŒåŒ…æ‹¬åé¢å‹ç¼©ï¼ŒåŠ å¯†ç­‰
>
> æµä¸ºä»€ä¹ˆè¿™ä¹ˆå¥½ç”¨è¿˜è¿™ä¹ˆé‡è¦å‘¢ï¼Ÿ

- å› ä¸ºæœ‰æ—¶å€™æˆ‘ä»¬ä¸å…³å¿ƒæ–‡ä»¶çš„ä¸»ä½“å†…å®¹ï¼Œåªå…³å¿ƒèƒ½ä¸èƒ½å–åˆ°æ•°æ®ï¼Œå–åˆ°æ•°æ®ä¹‹åæ€ä¹ˆè¿›è¡Œå¤„ç†
- å¯¹äºå°å‹çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ–‡ä»¶å†…å®¹å…¨éƒ¨è¯»å…¥å†…å­˜ï¼Œç„¶åå†å†™å…¥æ–‡ä»¶ï¼Œæ¯”å¦‚grunt-file-copy
- **å¯¹äºä½“ç§¯è¾ƒå¤§çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ¯”å¦‚éŸ³é¢‘ã€è§†é¢‘æ–‡ä»¶ï¼ŒåŠ¨è¾„å‡ ä¸ªGBå¤§å°ï¼Œå¦‚æœä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå¾ˆå®¹æ˜“ä½¿å†…å­˜â€œçˆ†ä»“â€ã€‚**
- **ç†æƒ³çš„æ–¹æ³•åº”è¯¥æ˜¯è¯»ä¸€éƒ¨åˆ†ï¼Œå†™ä¸€éƒ¨åˆ†ï¼Œä¸ç®¡æ–‡ä»¶æœ‰å¤šå¤§ï¼Œåªè¦æ—¶é—´å…è®¸ï¼Œæ€»ä¼šå¤„ç†å®Œæˆï¼Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ°æµçš„æ¦‚å¿µ**

> æµæ˜¯ä¸€ä¸ªæŠ½è±¡æ¥å£ï¼Œè¢«Nodeä¸­å¾ˆå¤šå¯¹è±¡æ‰€å®ç°ï¼Œæ¯”å¦‚HTTPæœåŠ¡å™¨requestå’Œresponseå¯¹è±¡éƒ½æ˜¯æµ
>
> Node.js ä¸­æœ‰å››ç§åŸºæœ¬çš„æµç±»å‹ï¼š

- Readable - å¯è¯»çš„æµ (ä¾‹å¦‚ fs.createReadStream()).
- Writable - å¯å†™çš„æµ (ä¾‹å¦‚ fs.createWriteStream()).
- Duplex - å¯è¯»å†™çš„æµ (ä¾‹å¦‚ net.Socket).
- Transform - åœ¨è¯»å†™è¿‡ç¨‹ä¸­å¯ä»¥ä¿®æ”¹å’Œå˜æ¢æ•°æ®çš„ Duplex æµ (ä¾‹å¦‚ zlib.createDeflate()).

#### Readable streamså¯è¯»æµ

> å¯è¯»æµï¼ˆReadable streamsï¼‰æ˜¯å¯¹æä¾›æ•°æ®çš„ æºå¤´ï¼ˆsourceï¼‰çš„æŠ½è±¡
>  å¯è¯»æµçš„ä¾‹å­åŒ…æ‹¬ï¼š

- HTTP responses, on the client ï¼šå®¢æˆ·ç«¯è¯·æ±‚
- HTTP requests, on the server ï¼šæœåŠ¡ç«¯è¯·æ±‚
- fs read streams ï¼šè¯»æ–‡ä»¶
- zlib streams ï¼šå‹ç¼©
- crypto streams ï¼šåŠ å¯†
- TCP sockets ï¼šTCPåè®®
- child process stdout and stderr ï¼šå­è¿›ç¨‹æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡º
- process.stdin ï¼šæ ‡å‡†è¾“å…¥

> ä¸‹é¢ç®€å•ä¸¾ä¸ªå¯è¯»æµçš„ä¾‹å­ï¼š

- **ç›‘å¬å¯è¯»æµçš„dataäº‹ä»¶**ï¼Œå½“ä½ ä¸€æ—¦å¼€å§‹ç›‘å¬dataäº‹ä»¶çš„æ—¶å€™ï¼Œæµå°±å¯ä»¥è¯»æ–‡ä»¶çš„å†…å®¹å¹¶ä¸”å‘å°„dataï¼Œ**è¯»ä¸€ç‚¹å‘å°„ä¸€ç‚¹è¯»ä¸€ç‚¹å‘å°„ä¸€ç‚¹**
- é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ ç›‘å¬dataäº‹ä»¶ä¹‹åï¼Œä¼šä¸åœçš„è¯»æ•°æ®ï¼Œç„¶åè§¦å‘dataäº‹ä»¶ï¼Œè§¦å‘å®Œdataäº‹ä»¶åå†æ¬¡è¯»æ•°æ®
- **è¯»çš„æ—¶å€™ä¸æ˜¯æŠŠæ–‡ä»¶æ•´ä½“å†…å®¹è¯»å‡ºæ¥å†å‘å°„å‡ºæ¥çš„ï¼Œè€Œä¸”è®¾ç½®ä¸€ä¸ªç¼“å†²åŒºï¼Œå¤§å°é»˜è®¤æ˜¯64Kï¼Œæ¯”å¦‚æ–‡ä»¶æ˜¯128Kï¼Œå…ˆè¯»64Kå‘å°„å‡ºæ¥ï¼Œå†è¯»64Kåœ¨å‘å°„å‡ºæ¥ï¼Œä¼šå‘å°„ä¸¤æ¬¡**
- **ç¼“å†²åŒºçš„å¤§å°å¯ä»¥é€šè¿‡highWaterMarkæ¥è®¾ç½®**

ä¾‹å­ï¼š

```
const fs = require('fs');
//é€šè¿‡åˆ›å»ºä¸€ä¸ªå¯è¯»æµ
const rs = fs.createReadStream('./1.txt',{
  flags:'r',//æˆ‘ä»¬è¦å¯¹æ–‡ä»¶è¿›è¡Œä½•ç§æ“ä½œ
  mode:0o666,//æƒé™ä½
  encoding:'utf8',//ä¸ä¼ é»˜è®¤ä¸ºbufferï¼Œæ˜¾ç¤ºä¸ºå­—ç¬¦ä¸²
  start:3,//ä»ç´¢å¼•ä¸º3çš„ä½ç½®å¼€å§‹è¯»
  //è¿™æ˜¯æˆ‘çš„è§è¿‡å”¯ä¸€ä¸€ä¸ªåŒ…æ‹¬ç»“æŸç´¢å¼•çš„
  end:8,//è¯»åˆ°ç´¢å¼•ä¸º8ç»“æŸ
  highWaterMark:3//ç¼“å†²åŒºå¤§å°
});
rs.on('open',function () {
  console.log('æ–‡ä»¶æ‰“å¼€');
});
rs.setEncoding('utf8');//æ˜¾ç¤ºä¸ºå­—ç¬¦ä¸²
//å¸Œæœ›æµæœ‰ä¸€ä¸ªæš‚åœå’Œæ¢å¤è§¦å‘çš„æœºåˆ¶
rs.on('data',function (data) {
  console.log(data);
  rs.pause();//æš‚åœè¯»å–å’Œå‘å°„dataäº‹ä»¶
  setTimeout(function(){
    rs.resume();//æ¢å¤è¯»å–å¹¶è§¦å‘dataäº‹ä»¶
  },2000);
});
//å¦‚æœè¯»å–æ–‡ä»¶å‡ºé”™äº†ï¼Œä¼šè§¦å‘erroräº‹ä»¶
rs.on('error',function () {
  console.log("error");
});
//å¦‚æœæ–‡ä»¶çš„å†…å®¹è¯»å®Œäº†ï¼Œä¼šè§¦å‘endäº‹ä»¶
rs.on('end',function () {
  console.log('è¯»å®Œäº†');
});
rs.on('close',function () {
  console.log('æ–‡ä»¶å…³é—­');
});

```

å…¶ä¸­1.txtçš„å†…å®¹æ˜¯123456789

åˆ™æ‰“å°å‡ºæ¥çš„å†…å®¹æ˜¯ï¼š

```
/**
æ–‡ä»¶æ‰“å¼€
456
789
è¯»å®Œäº†
æ–‡ä»¶å…³é—­
**/
```

#### Writable streamså¯å†™æµ

> å¯å†™æµæ˜¯å¯¹æ•°æ®å†™å…¥'ç›®çš„åœ°'çš„ä¸€ç§æŠ½è±¡
>  Writableï¼šå¯å†™æµçš„ä¾‹å­åŒ…æ‹¬äº†ï¼š

- HTTP requests, on the client  å®¢æˆ·ç«¯è¯·æ±‚
- HTTP responses, on the server æœåŠ¡å™¨å“åº”
- fs write streams æ–‡ä»¶
- zlib streams å‹ç¼©
- crypto streams åŠ å¯†
- TCP sockets TCPæœåŠ¡å™¨
- child process stdin å­è¿›ç¨‹æ ‡å‡†è¾“å…¥
- process.stdout, process.stderr æ ‡å‡†è¾“å‡ºï¼Œé”™è¯¯è¾“å‡º

> ä¸‹é¢ä¸¾ä¸ªå¯å†™æµçš„ç®€å•ä¾‹å­

- **å½“ä½ å¾€å¯å†™æµé‡Œå†™æ•°æ®çš„æ—¶å€™ï¼Œä¸æ˜¯ä¼šç«‹åˆ»å†™å…¥æ–‡ä»¶çš„ï¼Œè€Œæ˜¯ä¼šå¾ˆå†™å…¥ç¼“å­˜åŒºï¼Œç¼“å­˜åŒºçš„å¤§å°å°±æ˜¯highWaterMark,é»˜è®¤å€¼æ˜¯16Kã€‚ç„¶åç­‰ç¼“å­˜åŒºæ»¡äº†ä¹‹åå†æ¬¡çœŸæ­£çš„å†™å…¥æ–‡ä»¶é‡Œ**

```javascript
let fs = require('fs');
let ws = fs.createWriteStream('./2.txt',{
   flags:'w',
   mode:0o666,
   start:3,
   highWaterMark:3//é»˜è®¤æ˜¯16K
});
```

- å¦‚æœç¼“å­˜åŒºå·²æ»¡ ï¼Œè¿”å›false,å¦‚æœç¼“å­˜åŒºæœªæ»¡ï¼Œè¿”å›true
- å¦‚æœèƒ½æ¥ç€å†™ï¼Œè¿”å›true,å¦‚æœä¸èƒ½æ¥ç€å†™ï¼Œè¿”å›false
- æŒ‰ç†è¯´å¦‚æœè¿”å›äº†false,å°±ä¸èƒ½å†å¾€é‡Œé¢å†™äº†ï¼Œä½†æ˜¯å¦‚æœä½ çœŸå†™äº†ï¼Œå¦‚æœä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œä¼šç¼“å­˜åœ¨å†…å­˜é‡Œã€‚ç­‰ç¼“å­˜åŒºæ¸…ç©ºä¹‹åå†ä»å†…å­˜é‡Œè¯»å‡ºæ¥



```javascript
let flag = ws.write('1');
console.log(flag);//true
flag =ws.write('2');
console.log(flag);//true
flag =ws.write('3');
console.log(flag);//false è¿™é‡Œæ»¡3äº†ï¼Œæ‰€ä»¥è¿”å›false
flag =ws.write('4');
console.log(flag);//false
```

### **NodeJsçš„Bufferç¼“å­˜ä¸æµå¼æ“ä½œï¼ˆé‡è¦ï¼‰**

```
let fs = require("fs");

//åˆ›å»ºå¯è¯»æµ
let readF = fs.createReadStream("æ–‡ä»¶è·¯å¾„");
//åˆ›å»ºå¯å†™æµ
let writeF = fs.createWriteStream("æ–‡ä»¶è·¯å¾„2");
readF.on("data",function(data){
   writeF.write(data);
   //å†™å…¥å¯å†™æµ
});

readF.once("close",function(){
//ç›‘å¬å¯è¯»æµå…³é—­
    writeF.end();
    //å…³é—­å¯å†™æµ
});
```

ä¸Šé¢çš„ä»£ç å¯ä»¥ç›´æ¥é€šè¿‡pipeæ–¹æ³•è½¬æ¢æˆï¼š

```
readF.pipe(writeF)
```

#### é¡¹ç›®å°ä¾‹å­

```
 
 // response.end('hello ...')
  const { url, method ,headers} = request
  if (url === '/' && method === 'GET'){
    // é™æ€é¡µé¢æœåŠ¡
    fs.readFile('index.html',(err,data) => {
      response.statusCode = 200
      response.setHeader('Content-Type','text/html')
      response.end(data)
    })
  }else if(url === '/users' && method === 'GET'){
    // AjaxæœåŠ¡
    response.writeHead(200,{
      'Content-Type': 'application/json'
    })
    response.end(JSON.stringify({
      name : 'laowang'
    }))
  }else if(method === 'GET' && headers.accept.indexOf('image/*') !== -1){
    // å›¾ç‰‡æ–‡ä»¶æœåŠ¡ index.htmlé‡Œæœ‰å›¾ç‰‡
    fs.createReadStream('./'+url).pipe(response)
  }
  server.listen(3000)
  
  å›¾æ–‡æ–‡ä»¶æœåŠ¡é‡‡ç”¨æµæ“ä½œï¼Œå¦‚æœè®¿é—®3000/ï¼Œåˆ™ä»¥æµçš„æ–¹å¼æ¸²æŸ“å›¾ç‰‡
```

**Acceptä»£è¡¨å‘é€ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰å¸Œæœ›æ¥å—çš„æ•°æ®ç±»å‹ã€‚æ¯”å¦‚ï¼šAcceptï¼štext/xml;ä»£è¡¨å®¢æˆ·ç«¯å¸Œæœ›æ¥å—çš„æ•°æ®ç±»å‹æ˜¯xmlç±»å‹ã€‚**
**Content-Typeä»£è¡¨å‘é€ç«¯ï¼ˆå®¢æˆ·ç«¯|æœåŠ¡å™¨ï¼‰å‘é€çš„å®ä½“æ•°æ®çš„æ•°æ®ç±»å‹ã€‚æ¯”å¦‚ï¼šContent-Typeï¼štext/html;ä»£è¡¨å‘é€ç«¯å‘é€çš„æ•°æ®æ ¼å¼æ˜¯htmlã€‚**

**äºŒè€…åˆèµ·æ¥ï¼ŒAccept:text/xmlï¼›Content-Type:text/htmlï¼Œå³ä»£è¡¨å¸Œæœ›æ¥å—çš„æ•°æ®ç±»å‹æ˜¯xmlæ ¼å¼ï¼Œæœ¬æ¬¡è¯·æ±‚å‘é€çš„æ•°æ®çš„æ•°æ®æ ¼å¼æ˜¯htmlã€‚**

# è‡ªå®šä¹‰cliå·¥å…·é“¾

 mkdir vue-auto-router-cli 

cd vue-auto-router-cli 

npminit-y

**vue-auto-router-cli æ–‡ä»¶ä¸‹å»ºbinæ–‡ä»¶å¤¹**

> binæ–‡ä»¶å¤¹é‡Œæ˜¯å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶
>
> libæ–‡ä»¶å¤¹é‡Œæ˜¯åº“æ–‡ä»¶

**binæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºkkbæ–‡ä»¶**

```
#!/usr/bin/envnode
console.log('cli...')
```

åœ¨package.jsonä¸­æ·»åŠ 

```
"bin": {
    "kkb": "./bin/kkb"
  },
```

npm link

æ‰§è¡Œkkb

=> cli....

æ„å»ºï¼š

```
#!/usr/bin/envnode
const program = require('commander')
program.version(require('../package').version, '-v', '--version')
    .command('init <name>', 'init project')
    .command('refresh','refresh routers...')
program.parse(process.argv)
```

**å»ºç«‹kkb-initæ–‡ä»¶å¤¹**

```
#!/usr/bin/env node
const program = require('commander')
program
    .action(name => {
            console.log('init '+ name)
    })
program.parse(process.argv)
```

æ‰§è¡Œkkb init abc => init abc

**å°†apiæ–‡ä»¶å¤¹ä¸­çš„modulesdownload.jså¤åˆ¶åˆ°libæ–‡ä»¶å¤¹ä¸‹**

åœ¨kkb-initä¸­è°ƒç”¨

```
#!/usr/bin/env node
const program = require('commander')
const {clone} = require('../lib/modulesdownload.js')
program
    .action(async name => {
           // console.log('init '+ name)
            console.log('ğŸš€åˆ›å»ºé¡¹ç›®:' + name)
           // ä»githubå…‹éš†é¡¹ç›®åˆ°æŒ‡å®šæ–‡ä»¶å¤¹
            await clone('github:su37josephxia/vue-template',name)
    })
program.parse(process.argv)
```

ç„¶åç»ˆç«¯è¾“å…¥ kkb init testï¼Œåˆ›å»ºtestæ–‡ä»¶å¤¹æ¥clone gitä¸Šçš„é¡¹ç›®

ç»ˆç«¯è¿›å…¥testæ–‡ä»¶ï¼Œnpm i æ¥å®‰è£…åŒ…

npm run serveæ¥è¿è¡Œ

**å®ç°æ¯æ–°å»ºä¸€ä¸ªvueé¡µé¢ ï¼Œéƒ½è‡ªåŠ¨åˆ·æ–°ï¼Œæ·»åŠ åˆ°vueä¸»é¡µçš„å¯¼èˆªä¸Šå»**

**åŸç†**

æ¯å†™ä¸€ä¸ªvueé¡µé¢ï¼Œéƒ½è‡ªåŠ¨æ·»åŠ åˆ°router.js,å¹¶è‡ªåŠ¨æ·»åŠ åˆ°App.Vueçš„è·¯ç”±å ä½ç¬¦ä¸Šå»

1.å»ºç«‹kkb-refreshå®ç°

2.testç»ˆç«¯kkb refresh

3.åˆ·æ–°testç»ˆç«¯ï¼š npm run serve